{"version":3,"sources":["services/storage/local_storage.js","variables/variables.js","services/api/login_api.js","components/pages/login/LoginScreen.js","media/capture.js","media/media_constraints.js","components/primitives/CheckboxField.js","components/primitives/RadioBtns.js","components/constraints/Constraints.js","media/record.js","services/api/security.js","services/api/records_api.js","utils/download.js","components/filesPanel/FileList.js","components/controlPanel/ControlPanel.js","components/video/Video.js","components/video/VideoPanel.js","utils/wait.js","components/pages/recording/RecordingScreen.js","components/App.js","serviceWorker.js","index.js"],"names":["addToStorage","key","value","toString","window","localStorage","setItem","getFromStorage","getItem","removeFromStorage","removeItem","KEYS","SERVER_URL","location","origin","loginValue","a","fetch","method","response","text","token","console","log","LoginScreen","props","state","undefined","handleLoginChange","bind","submit","e","this","setState","Object","assign","target","preventDefault","login","then","storageManager","onLoginUpdate","type","onChange","onClick","disabled","React","Component","getMediaStream","recordOptions","captureStream","navigator","mediaDevices","getDisplayMedia","exportDiaplaMediaConstraints","grabMic","getUserMedia","video","audio","mic","addTrack","getAudioTracks","error","VIDEO_SIZES","AUTO","width","height","label","SMALL","MEDIUM","MediaConstraints","size","_size","_audio","echoCancellation","_echoCancellation","noiseSuppression","_noiseSuppression","_grabMic","newSize","newAudio","CheckboxField","isChecked","Form","Checkbox","checked","RadioBtns","currValue","values","labelField","keys","map","textValue","Field","control","Radio","getRadioButtonsGroup","Constraints","onFieldChange","newC","merge","constraints","onConstraintsChange","Group","inline","Recorder","stream","_stream","_rec","MediaRecorder","_data","ondataavailable","push","data","start","stopped","Promise","r","onstop","onerror","stop","getTracks","forEach","track","Blob","secured","init","headers","json","responseData","formData","FormData","append","body","responseText","url","name","link","document","createElement","download","href","click","FileList","files","file","Table","Row","Cell","Button","icon","labelPosition","Icon","play","color","celled","Header","HeaderCell","Body","getFileRows","ControlPanel","uploadingOn","uploading","uploadingOff","upload","recordApi","File","currentRecord","filename","onNewFileUpload","finally","handleFilenameChange","isRecording","currentRecordUrl","startRecording","stopRecording","Input","required","id","Or","loading","Video","videoElem","createRef","nextProps","nextState","nextContext","isEqual","videoSourceProps","recordUrl","lastRec","record","current","srcObject","src","URL","createObjectURL","mediaStream","prevProps","prevState","playerProps","pause","muted","currentTime","videoTrack","getVideoTracks","debug","JSON","stringify","getSettings","getConstraints","audioTrack","debugTrackSetup","loop","ref","title","VideoPanel","toggleMuted","placeholder","noVideo","Statistic","Value","find","v","Segment","getPlaceholder","wait","ms","resolve","setTimeout","RecordingScreen","loadFileList","recorder","countdown","onHitPlay","videoPlaceHolder","Container","Grid","divided","columns","Column","App","isLoggedIn","loginSuccess","Boolean","hostname","match","require","config","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.cf2674dd.chunk.js","sourcesContent":["\nexport default {\n  addToStorage,\n  getFromStorage,\n  removeFromStorage\n};\n\nexport const KEYS = {\n  LOGIN_TOKEN: \"LOGIN_TOKEN\"\n};\n\nfunction addToStorage(key, value) {\n  value = value.toString();\n  window.localStorage.setItem(key, value);\n}\n\nfunction getFromStorage(key) {\n  return window.localStorage.getItem(key);\n}\n\nfunction removeFromStorage(key) {\n  return window.localStorage.removeItem(key);\n}\n","\nconst SUB_PATH = \"/records-manager\";\nexport const SERVER_URL = process.env.NODE_ENV === 'production' ? window.location.origin + SUB_PATH : 'http://localhost:8080';\n","import {SERVER_URL} from \"../../variables/variables\";\n\nexport async function login(loginValue) {\n  const response = await fetch(SERVER_URL + \"/login/\" + loginValue, {\n    method: 'POST'\n  })\n\n  let token = await response.text();\n  console.log(token);\n  return token;\n}\n","import React from 'react';\n\nimport {login} from \"../../../services/api/login_api\";\nimport storageManager, {KEYS} from \"../../../services/storage/local_storage\";\n\nclass LoginScreen extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loginValue: undefined\n    }\n\n    this.handleLoginChange = this.handleLoginChange.bind(this);\n    this.submit = this.submit.bind(this);\n  }\n\n  handleLoginChange(e) {\n    this.setState(Object.assign({}, {loginValue: e.target.value}));\n  }\n\n  submit(e) {\n    e.preventDefault();\n    login(this.state.loginValue)\n      .then(value => storageManager.addToStorage(KEYS.LOGIN_TOKEN, value))\n      .then(this.props.onLoginUpdate);\n  }\n\n  render() {\n    return (\n      <div>\n        Welcome, please log in to continue:\n        <div>\n          <input type=\"text\" onChange={this.handleLoginChange}/>\n          <button onClick={this.submit} disabled={!this.state.loginValue}>Submit</button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LoginScreen;\n","/**\n * @param {MediaConstraints} recordOptions\n * */\nexport async function getMediaStream(recordOptions) {\n    let captureStream = null;\n\n    try {\n        captureStream = await navigator.mediaDevices.getDisplayMedia(recordOptions.exportDiaplaMediaConstraints());\n        if (recordOptions.grabMic) {\n            const mic = await navigator.mediaDevices.getUserMedia({video: false, audio: true});\n            captureStream.addTrack(mic.getAudioTracks()[0]);\n        }\n    } catch(err) {\n        console.error(\"Error: \" + err);\n    }\n    return captureStream;\n}\n\nexport function debugTrackSetup(video) {\n    if (video.srcObject) {\n        const videoTrack = video.srcObject.getVideoTracks()[0];\n\n        console.debug(\"Track settings:\");\n        console.debug(JSON.stringify(videoTrack.getSettings(), null, 2));\n        console.debug(\"Track constraints:\");\n        console.debug(JSON.stringify(videoTrack.getConstraints(), null, 2));\n\n        const audioTrack = video.srcObject.getAudioTracks()[0];\n        if(audioTrack) {\n            console.debug(\"Track settings:\");\n            console.debug(JSON.stringify(audioTrack.getSettings(), null, 2));\n            console.debug(\"Track constraints:\");\n            console.debug(JSON.stringify(audioTrack.getConstraints(), null, 2));\n        }\n    }\n}\n","export const VIDEO_SIZES = {\n    AUTO: {width: 0, height: 0, label: \"Auto\"},\n    SMALL: {width: 600, height: 400, label: \"600x400\"},\n    MEDIUM: {width: 1280, height: 720, label: \"1280x720\"}\n}\n\nexport class MediaConstraints {\n    constructor() {\n        this.size = VIDEO_SIZES.AUTO;\n    }\n\n    exportDiaplaMediaConstraints() {\n        return {\n            video: this._size === VIDEO_SIZES.AUTO ? true : {\n                width: this._size.width,\n                height: this._size.height\n            },\n            audio: this._audio && {\n                echoCancellation: this._echoCancellation,\n                noiseSuppression: this._noiseSuppression,\n            },\n            grabMic: this._grabMic\n        }\n    }\n\n    get size() {\n        return this._size;\n    }\n\n    set size(newSize) {\n        this._size = newSize;\n    }\n\n    get audio() {\n        return this._audio;\n    }\n\n    set audio(newAudio) {\n        this._audio = newAudio;\n    }\n\n    get echoCancellation() {\n        return this._echoCancellation;\n    }\n\n    set echoCancellation(echoCancellation) {\n        this._echoCancellation = echoCancellation;\n    }\n\n    get noiseSuppression() {\n        return this._noiseSuppression;\n    }\n\n    set noiseSuppression(noiseSuppression) {\n        this._noiseSuppression = noiseSuppression;\n    }\n\n    get grabMic() {\n        return this._grabMic;\n    }\n\n    set grabMic(value) {\n        this._grabMic = value;\n    }\n}\n","import React from 'react';\nimport {Form} from 'semantic-ui-react'\n\n\nclass CheckboxField extends React.Component {\n\n    render() {\n        const {isChecked, label} = this.props;\n\n        return (\n          <Form.Checkbox label={label} checked={!!isChecked} onChange={() => this.props.onChange(!isChecked)}/>\n        );\n    }\n}\n\nexport default CheckboxField;\n","import React from 'react';\nimport {Form, Radio} from 'semantic-ui-react'\n\n\nclass RadioBtns extends React.Component {\n\n  getRadioButtonsGroup(currValue, values, labelField, onChange) {\n    return Object.keys(values).map((key) => {\n      const value = values[key];\n      let textValue = value[labelField];\n\n      return <Form.Field\n        control={Radio}\n        key={textValue + \"_radio\"}\n        onChange={() => onChange(value)}\n        value={textValue}\n        checked={currValue === value}\n        label={textValue}/>\n    });\n  }\n\n  render() {\n    const {value, values, labelField, onChange} = this.props;\n\n    return this.getRadioButtonsGroup(value, values, labelField, onChange);\n  }\n}\n\nexport default RadioBtns;\n","import React from 'react';\nimport {MediaConstraints, VIDEO_SIZES} from \"../../media/media_constraints\";\nimport CheckboxField from \"../primitives/CheckboxField\";\nimport RadioBtns from \"../primitives/RadioBtns\";\nimport {Form} from \"semantic-ui-react\";\n\n\nclass Constraints extends React.Component {\n\n  onFieldChange = (newC) => {\n    const merge = Object.assign(new MediaConstraints(), this.props.constraints, newC);\n    this.props.onConstraintsChange(Object.assign({}, {constraints: merge}));\n  }\n\n  render() {\n    const {constraints} = this.props;\n\n    return (\n      <Form>\n        <Form.Group inline>\n          <RadioBtns onChange={(value) => this.onFieldChange({size: value})} value={constraints.size}\n                     values={VIDEO_SIZES} labelField={\"label\"}/>\n        </Form.Group>\n        <Form.Group inline>\n          <CheckboxField onChange={(value) => this.onFieldChange({grabMic: value})} isChecked={constraints.grabMic}\n                         label={\"Grab mic\"}/>\n          <CheckboxField onChange={(value) => this.onFieldChange({audio: value})} isChecked={constraints.audio}\n                         label={\"Grab audio\"}/>\n          {constraints.audio && <CheckboxField onChange={(value) => this.onFieldChange({noiseSuppression: value})}\n                                               isChecked={constraints.noiseSuppression} label={\"Noise Suppression\"}/>}\n          {constraints.audio && <CheckboxField onChange={(value) => this.onFieldChange({echoCancellation: value})}\n                                               isChecked={constraints.echoCancellation} label={\"Echo Cancellation\"}/>}\n        </Form.Group>\n      </Form>\n    )\n      ;\n  }\n}\n\nexport default Constraints;\n","export class Recorder {\n    _data;\n    _stream;\n\n    constructor(stream) {\n        this._stream = stream;\n    }\n\n    start() {\n        this._rec = new MediaRecorder(this._stream);\n        this._data = [];\n        this._rec.ondataavailable = e => {\n            this._data.push(e.data);\n        }\n        this._rec.start();\n    }\n\n    stop() {\n        const stopped = new Promise((r, e) => {\n            this._rec.onstop = r;\n            this._rec.onerror = e;\n        });\n        this._rec.stop();\n        this._stream.getTracks().forEach(track => track.stop());\n        return stopped.then(() => {\n            return new Blob(this._data, { type: \"video/webm\" });\n        });\n    }\n\n    get data() {\n        return this._data;\n    }\n\n}","import storageManager, {KEYS} from \"../storage/local_storage\";\n\nexport function secured(init) {\n  const headers = init.headers || {};\n  headers[\"jwt_token\"] = storageManager.getFromStorage(KEYS.LOGIN_TOKEN);\n  let assign = Object.assign(init, {headers});\n  return assign;\n}\n","import {secured} from \"./security\";\nimport {SERVER_URL} from \"../../variables/variables\";\n\nexport async function listFiles() {\n  const response = await fetch(SERVER_URL + \"/records\",\n    secured({'method': \"GET\"}));\n\n  const responseData = await response.json();\n  console.log(responseData);\n  return responseData;\n}\n\n\nexport async function uploadRecord(data) {\n  const formData = new FormData();\n  formData.append('file', data);\n\n\n  const response = await fetch(SERVER_URL + \"/records\",\n    secured({\n      method: 'post',\n      body: formData\n    }));\n\n  const responseText = await response.text();\n  console.log(responseText);\n  return responseText;\n}\n","\n\nexport default (url, name) => {\n  const link = document.createElement('a');\n  link.download = name;\n  link.href = url;\n  link.click();\n}\n","import React from 'react';\nimport {Table} from \"semantic-ui-react\";\nimport download from \"../../utils/download\";\nimport { Icon, Button } from 'semantic-ui-react'\n\nclass FileList extends React.Component {\n  getFileRows(files) {\n    return files.map(file => (<Table.Row key={file.name + \"_table_row\"}>\n      <Table.Cell key={file.name + \"_table_cell_name\"}>\n        {file.name}\n      </Table.Cell>\n      <Table.Cell key={file.name + \"_table_cell_button_download\"}>\n        <Button icon labelPosition='right' key={file.name + \"_table_cell_download_button\"} onClick={() => download(file.url, file.name)}>\n          Download\n            <Icon name='download' key={file.name + \"_table_cell_download_icon\"}/>\n        </Button>\n      </Table.Cell>\n        <Table.Cell key={file.name + \"_table_cell_button_play\"}>\n        <Button icon labelPosition='right' key={file.name + \"_table_cell_play_button\"} onClick={() => this.props.play(file)}>\n          Load\n            <Icon name='play' color='green' key={file.name + \"_table_cell_play_icon\"}/>\n        </Button>\n      </Table.Cell>\n    </Table.Row>));\n  }\n\n  render() {\n    const {files} = this.props;\n\n    return (\n      <Table celled>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>Files</Table.HeaderCell>\n            <Table.HeaderCell/>\n            <Table.HeaderCell/>\n          </Table.Row>\n        </Table.Header>\n\n        <Table.Body>\n          {this.getFileRows(files)}\n        </Table.Body>\n      </Table>\n    )\n      ;\n  }\n}\n\nexport default FileList;\n","import React from 'react';\nimport {Button, Form} from \"semantic-ui-react\";\nimport * as recordApi from \"../../services/api/records_api\";\nimport download from \"../../utils/download\";\n\nconst WEBM_EXT = \".webm\";\n\nclass ControlPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {filename: \"\", uploading: false};\n  }\n\n  uploadingOn = async () => {\n    this.setState(Object.assign({}, this.state, {uploading: true}));\n  }\n  uploadingOff = async () => {\n    this.setState(Object.assign({}, this.state, {uploading: false}));\n  }\n\n  upload = () => {\n    this.uploadingOn().then(() => {\n      return recordApi.uploadRecord(new File([this.props.currentRecord], this.state.filename + WEBM_EXT))\n        .then(this.props.onNewFileUpload);\n    }).finally(this.uploadingOff);\n  }\n\n\n  handleFilenameChange = (e) => {\n    this.setState(Object.assign({}, this.state, {filename: e.target.value}));\n  }\n\n  render() {\n    const {isRecording, currentRecordUrl, startRecording, stopRecording} = this.props;\n    const {filename} = this.state;\n\n    return (\n      <Form.Group>\n        <Form.Button onClick={startRecording}>Record</Form.Button>\n        <Form.Button onClick={stopRecording} disabled={!isRecording}>Stop</Form.Button>\n        {currentRecordUrl &&\n        <div>\n          <Form.Input onChange={this.handleFilenameChange} value={filename} label={\"File name\"}\n                      required={true}/>\n          <Button.Group>\n            <Form.Button icon='download'\n                         id=\"downloadRecord\"\n                         onClick={() => download(currentRecordUrl, filename)}\n                         disabled={!currentRecordUrl || !filename}>Download</Form.Button>\n            <Button.Or text='or'/>\n            <Form.Button onClick={this.upload}\n                         target=\"_blank\"\n                         disabled={!currentRecordUrl || !filename}\n                         loading={this.state.uploading}>Upload\n            </Form.Button>\n          </Button.Group>\n        </div>}\n      </Form.Group>\n    )\n      ;\n  }\n}\n\nexport default ControlPanel;\n","import React from 'react';\nimport isEqual from 'lodash.isequal';\nimport {debugTrackSetup} from \"../../media/capture\";\n\nclass Video extends React.Component {\n  constructor(props) {\n    super(props);\n    this.videoElem = React.createRef();\n  }\n\n  shouldComponentUpdate(nextProps, nextState, nextContext) {\n    return !isEqual(nextProps, this.props);\n  }\n\n  componentDidMount() {\n    // TODO extract\n    const {recordUrl, lastRec, record} = this.props.videoSourceProps;\n\n    this.videoElem.current.srcObject = null;\n    this.videoElem.current.src = \"\";\n    if (recordUrl) {\n      this.videoElem.current.src = recordUrl;\n    } else if (lastRec) {\n      this.videoElem.current.src = window.URL.createObjectURL(record);\n    } else {\n      this.videoElem.current.srcObject = this.props.mediaStream;\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (!isEqual(prevProps.videoSourceProps, this.props.videoSourceProps)) {\n      const {recordUrl, lastRec, record} = this.props.videoSourceProps;\n\n      this.videoElem.current.srcObject = null;\n      this.videoElem.current.src = \"\";\n      if (recordUrl) {\n        this.videoElem.current.src = recordUrl;\n      } else if (lastRec) {\n        this.videoElem.current.src = window.URL.createObjectURL(record);\n      } else {\n        this.videoElem.current.srcObject = this.props.mediaStream;\n      }\n    }\n\n    if (!isEqual(prevProps.playerProps.videoSourceProps, this.props.playerProps)) {\n      const {play, pause, stop, muted} = this.props.playerProps;\n      if (play) {\n        this.videoElem.current.play();\n      }\n      if (pause) {\n        this.videoElem.current.pause();\n      }\n      if (stop) {\n        this.videoElem.current.pause();\n        this.videoElem.current.currentTime = 0;\n      }\n      this.videoElem.current.muted = muted;\n    }\n\n\n    debugTrackSetup(this.videoElem.current);\n  }\n\n  render() {\n    const {width = 550, height = 400} = this.props;\n    return (\n      <video id=\"video\"\n             loop\n             ref={this.videoElem}\n             width={width}\n             height={height}\n             title={\"main vid\"}/>\n    );\n  }\n}\n\nexport default Video;\n","import React from 'react';\nimport {Button, Header, Icon, Segment, Statistic} from \"semantic-ui-react\";\nimport Video from \"./Video\";\n\n\nclass VideoPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {play: false, pause: false, stop: true, muted: false};\n  }\n\n  play = (e) => {\n    e.preventDefault();\n    this.setState(Object.assign({}, this.state, {play: true, pause: false, stop: false}));\n  }\n  pause = (e) => {\n    e.preventDefault();\n    this.setState(Object.assign({}, this.state, {play: false, pause: true, stop: false}));\n  }\n  stop = (e) => {\n    e.preventDefault();\n    this.setState(Object.assign({}, this.state, {play: false, pause: false, stop: true}));\n  }\n  toggleMuted = (e) => {\n    e.preventDefault();\n    this.setState(Object.assign({}, this.state, {muted: !this.state.muted}));\n  }\n\n  getPlaceholder(placeholder, noVideo) {\n    if (placeholder === \"Recording\") {\n      return <Header icon>\n        <Icon name='record' color='red'/>\n        Recording\n      </Header>;\n    } else if (placeholder > 0 && placeholder <= 3) {\n      return <Statistic>\n        <Statistic.Value>{placeholder}</Statistic.Value>\n      </Statistic>\n    }\n\n    if (noVideo) {\n      return <Header icon>\n        <Icon name='file video' color='grey'/>\n      </Header>\n    }\n  }\n\n  render() {\n    const {videoSourceProps, placeholder} = this.props;\n    const {play, pause, stop, muted} = this.state;\n    const noVideo = !Object.values(videoSourceProps).find(v => v !== null);\n    const video = <Video videoSourceProps={videoSourceProps} playerProps={Object.assign({}, this.state)}/>;\n    return (\n      <div>\n        <Segment placeholder>\n          {(noVideo || placeholder) && this.getPlaceholder(placeholder, noVideo)}\n          {!noVideo && !placeholder && video}\n        </Segment>\n        <Segment>\n          <Button icon onClick={this.play} disabled={noVideo || play}>\n            <Icon name='play' color='green'/>\n          </Button>\n          <Button icon onClick={this.pause} disabled={noVideo || pause || stop}>\n            <Icon name='pause' color='grey'/>\n          </Button>\n          <Button icon onClick={this.stop} disabled={noVideo || stop}>\n            <Icon name='stop' color='grey'/>\n          </Button>\n          <Button icon onClick={this.toggleMuted}>\n            {muted ? <Icon name='volume off' color='grey'/> : <Icon name='volume up' color='grey'/>}\n          </Button>\n        </Segment>\n      </div>\n    )\n      ;\n  }\n}\n\nexport default VideoPanel;\n","export const wait = ms => new Promise(resolve => setTimeout(resolve, ms));\n","import React from 'react';\nimport './RecordingScreen.css';\nimport {getMediaStream} from \"../../../media/capture\";\nimport Constraints from \"../../constraints/Constraints\";\nimport {MediaConstraints} from \"../../../media/media_constraints\";\nimport {Recorder} from \"../../../media/record\";\nimport * as recordApi from \"../../../services/api/records_api\";\nimport {Container, Form, Grid, Segment} from 'semantic-ui-react'\nimport FileList from \"../../filesPanel/FileList\";\nimport ControlPanel from \"../../controlPanel/ControlPanel\";\nimport VideoPanel from \"../../video/VideoPanel\";\nimport {wait} from \"../../../utils/wait\";\n\n\nclass RecordingScreen extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mediaStream: null,\n      constraints: new MediaConstraints(),\n      recorder: null,\n      currentRecord: null,\n      currentRecordUrl: null,\n      files: null,\n      countdown: 0\n    };\n  }\n\n  componentDidMount() {\n    this.loadFileList();\n  }\n\n  loadFileList = () => {\n    recordApi.listFiles()\n      .then((files) => {\n        this.setState(Object.assign({}, this.state, {files: files}));\n      });\n  }\n\n  stopRecording = () => {\n    if (this.state.recorder) {\n      this.state.recorder.stop().then(record => {\n        this.setState(Object.assign({}, this.state, {\n          mediaStream: null,\n          recorder: null,\n          currentRecord: record,\n          currentRecordUrl: URL.createObjectURL(record)\n        }));\n      });\n    }\n  }\n\n  countdown = async () => {\n    const SECOND = 1000;\n    return wait(1)\n      .then(() => this.setState(Object.assign({}, this.state, {countdown: 3})))\n      .then(() => wait(SECOND))\n      .then(() => this.setState(Object.assign({}, this.state, {countdown: 2})))\n      .then(() => wait(SECOND))\n      .then(() => this.setState(Object.assign({}, this.state, {countdown: 1})))\n      .then(() => wait(SECOND))\n      .then(() => this.setState(Object.assign({}, this.state, {countdown: 0})));\n  }\n\n  startRecording = async () => {\n    const mediaStream = await getMediaStream(this.state.constraints);\n    if (mediaStream) {\n      const recorder = new Recorder(mediaStream);\n      this.countdown().then(()=> {\n        recorder.start();\n        this.setState(Object.assign({}, this.state, {\n          mediaStream,\n          recorder: recorder,\n          currentRecord: null,\n          currentRecordUrl: null\n        }));\n      })\n    }\n  }\n\n  onHitPlay = (file) => {\n    this.setState({\n      mediaStream: null,\n      constraints: new MediaConstraints(),\n      recorder: null,\n      currentRecord: file,\n      currentRecordUrl: file.url,\n      files: this.state.files\n    });\n  }\n\n  onConstraintsChange = (constraints) => {\n    this.setState(Object.assign({}, this.state, constraints))\n  }\n\n  onNewFileUpload = () => {\n    this.loadFileList();\n  }\n\n\n  render() {\n    const {mediaStream, currentRecord, currentRecordUrl, constraints, files, countdown, recorder} = this.state;\n\n    let videoPlaceHolder;\n    if (countdown > 0) {\n      videoPlaceHolder = countdown;\n    } else if (recorder) {\n      videoPlaceHolder = \"Recording\";\n    }\n\n    return (\n      <Container>\n        <Segment>\n          <Grid divided='vertically'>\n            <Grid.Row columns={2}>\n              <Grid.Column width={9}>\n                <VideoPanel videoSourceProps={{mediaStream, record: currentRecord, recordUrl: currentRecordUrl}} placeholder={videoPlaceHolder}/>\n                <Segment>\n                  <Form>\n                    <Constraints onConstraintsChange={this.onConstraintsChange} constraints={constraints}/>\n                    <ControlPanel isRecording={!!mediaStream}\n                                  currentRecord={currentRecord}\n                                  currentRecordUrl={currentRecordUrl}\n                                  stopRecording={this.stopRecording}\n                                  startRecording={this.startRecording}\n                                  onNewFileUpload={this.onNewFileUpload}\n                    />\n                  </Form>\n                </Segment>\n              </Grid.Column>\n              {files && <Grid.Column width={5}>\n                <FileList files={files} play={this.onHitPlay}/>\n              </Grid.Column>}\n            </Grid.Row>\n          </Grid>\n        </Segment>\n      </Container>\n    );\n  }\n}\n\nexport default RecordingScreen;\n","import React from 'react';\nimport './App.css';\nimport storageManager, {KEYS} from \"../services/storage/local_storage\";\nimport LoginScreen from \"./pages/login/LoginScreen\";\nimport RecordingScreen from \"./pages/recording/RecordingScreen\";\nimport {Container} from 'semantic-ui-react'\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    const isLoggedIn = !!storageManager.getFromStorage(KEYS.LOGIN_TOKEN);\n    this.state = {loginSuccess: isLoggedIn};\n\n    this.onLoginUpdate = this.onLoginUpdate.bind(this);\n  }\n\n  onLoginUpdate() {\n    let loginSuccess = !!storageManager.getFromStorage(KEYS.LOGIN_TOKEN);\n    this.setState(Object.assign({}, {loginSuccess}));\n  }\n\n\n  render() {\n    const isLoggedIn = this.state.loginSuccess;\n    return (\n      <Container>\n        {isLoggedIn ? <RecordingScreen/> : <LoginScreen onLoginUpdate={this.onLoginUpdate}/>}\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. Video is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'semantic-ui-css/semantic.min.css'\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\nrequire('dotenv').config()\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}